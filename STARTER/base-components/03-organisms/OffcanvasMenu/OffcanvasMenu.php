<?php
$main_nav = [
	[
		'name'            => 'Products',
		'url'             => '',
		'special_classes' => 'is-MegaMenu is-MegaMenu-product',
		'children'        =>
			[
				[
					'name'            => 'Products By Category',
					'url'             => '',
					'description'     => '',
					'special_classes' => '',
					'children'        => [
						[
							'name'     => 'View All Products',
							'url'      => '#',
							'children' => '',
						],
						[
							'name'     => 'Pipe Markers',
							'url'      => '#',
							'children' => [
								[
									'name' => 'Coiled Pipe Markers',
									'url'  => '#',
								],
								[
									'name' => 'Self-Adhesive Pipe Markers',
									'url'  => '#',
								],
								[
									'name' => 'Carrier Pipe Markers',
									'url'  => '#',
								],
								[
									'name' => 'Duct Markers',
									'url'  => '#',
								],
								[
									'name' => 'Stencils',
									'url'  => '#',
								],
								[
									'name' => 'Locator Tacks',
									'url'  => '#',
								],
							],
						],
						[
							'name'     => 'Tags',
							'url'      => '#',
							'children' => [
								[
									'name' => 'Equipment Tags',
									'url'  => '#',
								],
								[
									'name' => 'Valve Tags',
									'url'  => '#',
								],
								[
									'name' => 'Accident Prevention Tags',
									'url'  => '#',
								],
							],
						],
						[
							'name'     => 'Signs',
							'url'      => '#',
							'children' => [
								[
									'name' => 'Equipment Signs',
									'url'  => '#',
								],
								[
									'name' => 'GHS Signs',
									'url'  => '#',
								],
								[
									'name' => 'Operational & Safety Signage',
									'url'  => '#',
								],
								[
									'name' => 'M&O Evacuation & Escape Signs',
									'url'  => '#',
								],
							],
						],
						[
							'name'     => 'Tape',
							'url'      => '#',
							'children' => [
								[
									'name' => 'Underground Warning Tape',
									'url'  => '#',
								],
								[
									'name' => 'Arrow & Banding Tape',
									'url'  => '#',
								],
							],
						],
						[
							'name'     => 'Electrical',
							'url'      => '#',
							'children' => [
								[
									'name' => 'Arc Flash Labels',
									'url'  => '#',
								],
								[
									'name' => 'Control Panel Labels',
									'url'  => '#',
								],
								[
									'name' => 'Switch Plates',
									'url'  => '#',
								],
								[
									'name' => 'Conduit & Cable Markers',
									'url'  => '#',
								],
								[
									'name' => 'Cable Tray Markers',
									'url'  => '#',
								],
								[
									'name' => 'Wire Markers',
									'url'  => '#',
								],
							],
						],
						[
							'name'     => 'Fire Protection',
							'url'      => '#',
							'children' => [
								[
									'name' => 'Fire ID Pipe Markers',
									'url'  => '#',
								],
								[
									'name' => 'Fire ID Tags',
									'url'  => '#',
								],
								[
									'name' => 'Fire ID Labels',
									'url'  => '#',
								],
							],
						],


						[
							'name'     => 'Solar',
							'url'      => '#',
							'children' => [
								[
									'name' => 'Solar Placards',
									'url'  => '#',
								],
								[
									'name' => 'Solar Sitemaps',
									'url'  => '#',
								],
								[
									'name' => 'Solar Wire Markers',
									'url'  => '#',
								],
								[
									'name' => 'Solar Labels',
									'url'  => '#',
								],
								[
									'name' => 'Solar Fence & Gate Signs',
									'url'  => '#',
								],
							],
						],
						[
							'name'     => 'Health & Safety',
							'url'      => '#',
							'children' => [
								[
									'name' => 'Health & Safety Signage',
									'url'  => '#',
								],
								[
									'name' => 'Floor Graphics',
									'url'  => '#',
								],
							],
						],
						[
							'name'     => 'Ammonia',
							'url'      => '#',
							'children' => [
								[
									'name' => 'Component & Equipment Markers',
									'url'  => '#',
								],
								[
									'name' => 'Ammonia Pipe Markers',
									'url'  => '#',
								],
								[
									'name' => 'Critical Valve & Instrument Tags',
									'url'  => '#',
								],
								[
									'name' => 'Custom PSM Signage',
									'url'  => '#',
								],
								[
									'name' => 'Control Bank & Valve Group Signage',
									'url'  => '#',
								],
							],
						],
						[
							'name'     => 'Mounting Options & Accessories',
							'url'      => '#',
							'children' => '',
						],
					],
				],
				[
					'name'            => 'Products By Industry',
					'url'             => '',
					'description'     => '',
					'special_classes' => '',
					'children'        => [

						[
							'name'     => 'Electrical Contractors',
							'url'      => '#',
							'children' => '',
						],
						[
							'name'     => 'EPC Contractors',
							'url'      => '#',
							'children' => '',
						],
						[
							'name'     => 'Food & Beverage',
							'url'      => '#',
							'children' => '',
						],
						[
							'name'     => 'Health Care',
							'url'      => '#',
							'children' => '',
						],
						[
							'name'     => 'Industrial Manufacturing',
							'url'      => '#',
							'children' => '',
						],
						[
							'name'     => 'Marine and Offshore',
							'url'      => '#',
							'children' => '',
						],
						[
							'name'     => 'Mechanical Contractors',
							'url'      => '#',
							'children' => '',
						],
						[
							'name'     => 'Oil & Gas',
							'url'      => '#',
							'children' => '',
						],

						[
							'name'     => 'Pharmaceutical',
							'url'      => '#',
							'children' => '',
						],
						[
							'name'     => 'Power Generation',
							'url'      => '#',
							'children' => '',
						],
						[
							'name'     => 'Process Chemical',
							'url'      => '#',
							'children' => '',
						],
						[
							'name'     => 'Solar Energy',
							'url'      => '#',
							'children' => '',
						],
					],
				],
			]
	],
	[
		'name'            => 'Technology',
		'url'             => '',
		'special_classes' => 'is-MegaMenu',
		'children'        =>
			[
				[
					'name'            => 'Technology Headline',
					'description'     => '<p>Lorem ipsum dolor sit amet, consecteter ading elit. Donex odio quisque volupat mattis eros. Nullam malesuada erat ut turpis suspendisse urna nibh viverra.</p><p><a href="#" class="link">VIEW ALL TECHNOLOGY <span class="fas fa-caret-right"></span></a></p>',
					'url'             => '',
					'children'        => '',
					'special_classes' => '',

				],
				[
					'name'            => 'Technologies',
					'url'             => '',
					'description'     => '',
					'special_classes' => '',
					'children'        => [
						[
							'name' => 'AIM Mobile Technology',
							'url'  => '',
						],
						[
							'name' => 'ATLAS Service',
							'url'  => '',
						],
						[
							'name' => 'AIM Auditing',
							'url'  => '',
						],
						[
							'name' => 'Custom Programming',
							'url'  => '',
						],
					]
				],
				[
					'name'            => 'Other Pages',
					'url'             => '',
					'description'     => '',
					'special_classes' => 'MegaMenu-teasers',
					'children'        => [
						[
							'name'  => 'AIM Forms',
							'url'   => '#',
							'image' => 'assets/images/placeholder-thumbnail.jpg'
						],
						[
							'name'  => 'AIM Services',
							'url'   => '#',
							'image' => 'assets/images/placeholder-thumbnail-two.jpg'
						]
					]
				]
			]
	],
	[
		'name'            => 'Contractor Services',
		'url'             => '',
		'special_classes' => 'is-MegaMenu',
		'children'        =>
			[
				[
					'name'            => 'Contractor Services',
					'description'     => '<p>Lorem ipsum dolor sit amet, consecteter ading elit. Donex odio quisque volupat mattis eros. Nullam malesuada erat ut turpis suspendisse urna nibh viverra.</p><p><a href="#" class="link">VIEW ALL SERVICES <span class="fas fa-caret-right"></span></a></p>',
					'url'             => '',
					'children'        => '',
					'special_classes' => '',

				],
				[
					'name'            => 'Services',
					'url'             => '',
					'description'     => '',
					'special_classes' => '',
					'children'        => [
						[
							'name' => 'Order Guarantee Service',
							'url'  => '',
						],
						[
							'name' => 'Custom Product Design',
							'url'  => '',
						],
						[
							'name' => 'Material Take-Off',
							'url'  => '',
						],
						[
							'name' => 'Submittals',
							'url'  => '',
						],
						[
							'name' => 'Special Packaging',
							'url'  => '',
						]
					]
				],
				[
					'name'            => 'Other Pages',
					'url'             => '',
					'description'     => '',
					'special_classes' => 'MegaMenu-teasers',
					'children'        => [
						[
							'name'  => 'Service Brochures',
							'url'   => '#',
							'image' => 'assets/images/placeholder-thumbnail.jpg'
						],
						[
							'name'  => 'Industries',
							'url'   => '#',
							'image' => 'assets/images/placeholder-thumbnail-two.jpg'
						]
					]
				]
			]
	],
	[
		'name'            => 'Owner Services',
		'url'             => '',
		'special_classes' => 'is-MegaMenu',
		'children'        =>
			[
				[
					'name'            => 'Owner Services',
					'description'     => '<p>Lorem ipsum dolor sit amet, consecteter ading elit. Donex odio quisque volupat mattis eros. Nullam malesuada erat ut turpis suspendisse urna nibh viverra.</p><p><a href="#" class="link">VIEW ALL SERVICES <span class="fas fa-caret-right"></span></a></p>',
					'url'             => '',
					'children'        => '',
					'special_classes' => '',

				],
				[
					'name'            => 'Services',
					'url'             => '',
					'description'     => '',
					'special_classes' => '',
					'children'        => [
						[
							'name' => 'Technical Drafting',
							'url'  => '',
						],
						[
							'name' => 'Installation',
							'url'  => '',
						],
						[
							'name' => 'Engineering',
							'url'  => '',
						],
						[
							'name' => 'Order Guarantee Service',
							'url'  => '',
						],
						[
							'name' => 'Custom Product Design',
							'url'  => '',
						],
					]
				],
				[
					'name'            => 'Other Pages',
					'url'             => '',
					'description'     => '',
					'special_classes' => 'MegaMenu-teasers',
					'children'        => [
						[
							'name'  => 'Laser Scanning',
							'url'   => '#',
							'image' => 'assets/images/placeholder-thumbnail.jpg'
						],
						[
							'name'  => 'Technology',
							'url'   => '#',
							'image' => 'assets/images/placeholder-thumbnail-two.jpg'
						]
					]
				]
			]

	],
	[
		'name'            => 'Industries',
		'url'             => '',
		'special_classes' => 'is-MegaMenu long',
		'children'        =>
			[
				[
					'name'            => 'Industries Headline',
					'description'     => '<p>Lorem ipsum dolor sit amet, consecteter ading elit. Donex odio quisque volupat mattis eros. Nullam malesuada erat ut turpis suspendisse urna nibh viverra.</p><p><a href="#" class="link">VIEW ALL INDUSTRIES <span class="fas fa-caret-right"></span></a></p>',
					'url'             => '',
					'children'        => '',
					'special_classes' => '',

				],
				[
					'name'            => 'Industries',
					'url'             => '',
					'description'     => '',
					'special_classes' => '',
					'children'        => [
						[
							'name' => 'Health Care',
							'url'  => '',
						],
						[
							'name' => 'Mechanical Contractors',
							'url'  => '',
						],
						[
							'name' => 'Electrical Contractors',
							'url'  => '',
						],
						[
							'name' => 'Oil & Gas',
							'url'  => '',
						],
						[
							'name' => 'Power Generation',
							'url'  => '',
						],
						[
							'name' => 'Process Chemical',
							'url'  => '',
						],
						[
							'name' => 'Marine and Offshore',
							'url'  => '',
						],
						[
							'name' => 'Industrial Manufacturing',
							'url'  => '',
						],
						[
							'name' => 'Solar Energy',
							'url'  => '',
						],
						[
							'name' => 'Food & Beverage',
							'url'  => '',
						],
						[
							'name' => 'Pharmaceutical',
							'url'  => '',
						],
						[
							'name' => 'EPC Contractors',
							'url'  => '',
						],
						[
							'name' => 'Pulp & Paper',
							'url'  => '',
						],
					]
				],
				[
					'name'            => 'Other Pages',
					'url'             => '',
					'description'     => '',
					'special_classes' => 'MegaMenu-teasers',
					'children'        => [
						[
							'name'  => 'Contractor Services',
							'url'   => '#',
							'image' => 'assets/images/placeholder-thumbnail.jpg'
						],
						[
							'name'  => 'Technology',
							'url'   => '#',
							'image' => 'assets/images/placeholder-thumbnail-two.jpg'
						]
					]
				]
			]
	],
	[
		'name'            => 'Resources',
		'url'             => '',
		'special_classes' => 'is-MegaMenu long',
		'children'        =>
			[
				[
					'name'            => 'Resources Headline',
					'description'     => '<p>Lorem ipsum dolor sit amet, consecteter ading elit. Donex odio quisque volupat mattis eros. Nullam malesuada erat ut turpis suspendisse urna nibh viverra.</p><p><a href="#" class="link">VIEW ALL RESOURCES <span class="fas fa-caret-right"></span></a></p>',
					'url'             => '',
					'children'        => '',
					'special_classes' => '',

				],
				[
					'name'            => 'Resources',
					'url'             => '',
					'description'     => '',
					'special_classes' => '',
					'children'        => [
						[
							'name' => 'Catalogs',
							'url'  => '',
						],
						[
							'name' => 'Service Brochures',
							'url'  => '',
						],
						[
							'name' => 'Standards Documents',
							'url'  => '',
						],
						[
							'name' => 'Product Sell Sheets',
							'url'  => '',
						],
						[
							'name' => 'Tip Sheets',
							'url'  => '',
						],
						[
							'name' => 'Technical Data Sheets',
							'url'  => '',
						],
						[
							'name' => 'Instructional Videos',
							'url'  => '',
						],
						[
							'name' => 'Case Studies',
							'url'  => '',
						],
						[
							'name' => 'Blog',
							'url'  => '',
						],
						[
							'name' => 'MSI Central',
							'url'  => '',
						],
					]
				],
				[
					'name'            => 'Other Pages',
					'url'             => '',
					'description'     => '',
					'special_classes' => 'MegaMenu-teasers',
					'children'        => [
						[
							'name'  => 'Laser Scanning',
							'url'   => '#',
							'image' => 'assets/images/placeholder-thumbnail.jpg'
						],
						[
							'name'  => 'Technology',
							'url'   => '#',
							'image' => 'assets/images/placeholder-thumbnail-two.jpg'
						]
					]
				]
			]
	]
]
?>
<div class="OffcanvasMenu">
	<?php
	if ( $main_nav ) {
		?>
        <ul id="OffcanvasMenu-menu" class="OffcanvasMenu-menu vertical menu drilldown" data-drilldown>
			<?php
			$i = 0;
			foreach ( $main_nav as $toplevel ) {
				$i ++;
				$toplevelName    = $toplevel['name'];
				$toplevelUrl     = $toplevel['url'];
				$children        = $toplevel['children'];
				$special_classes = $toplevel['special_classes'];
				$classes         = '';
				if ( $children ) {
					$classes = 'has-children';
				}
				$thirdlevelmenu = false;
				if ( strpos( $special_classes, 'is-MegaMenu-product' ) !== false ) {
					$thirdlevelmenu = true;
				}
				?>
                <li id="OffcanvasMenu-<?= $i ?>"
                    class="<?= $special_classes ?> <?= $classes ?> OffcanvasMenu-menuParent">
                    <a href="<?= $toplevelUrl ?>"><?= $toplevelName ?></a>
					<?php if ( $children ) { ?>
                        <ul class="OffcanvasMenu-menuChildren vertical menu nested accordion-menu " data-accordion-menu
                            data-submenu-toggle="true">
							<?php

							$b = 0;
							foreach ( $children as $child ) {
								$b ++;
								$childName             = $child['name'];
								$childDescription      = $child['description'];
								$childUrl              = $child['url'];
								$child_special_classes = $child['special_classes'];
								$grandchildren         = $child['children'];
								$extraclasses          = '';
								if ( $grandchildren ) {
									$extraclasses = 'has-grandchildren';
								}


								?>
                                <li id="OffcanvasMenu-child-<?= $b ?>"
                                    class="OffcanvasMenu-menuChild <?= $extraclasses;
								    if ( $childDescription ) {
									    echo "has-description";
								    }
								    ?>">
                                    <a href="<?= $childUrl ?>"><?= $childName ?></a>
									<?php if ( $childDescription ) {
										echo $childDescription;
									} ?>
									<?php
									if ( strpos( $child_special_classes, 'MegaMenu-teasers' ) !== false ) {
										if ( $grandchildren ) {
											echo "<div class='$child_special_classes FlexRow small-up-2'>";
											foreach ( $grandchildren as $grandchild ) {
												$grandchildName  = $grandchild['name'];
												$grandchildUrl   = $grandchild['url'];
												$grandchildImage = $grandchild['image'];
												echo "<div class='FlexRow-item'><a href='$grandchildUrl'><div class='MegaMenu-teasersImage' style='background: url($grandchildImage) no-repeat center; background-size: cover;'></div><div class='h5 HeaderFont--regular MegaMenu-teasersTitle'>$grandchildName</div></a></div>";
											}
											echo "</div>";
										}
									} else if ( $grandchildren ) {
										if ( $thirdlevelmenu === true ) {
											?>
                                            <ul class="OffcanvasMenu-grandchildren menu vertical nested">
												<?php
												foreach ( $grandchildren as $grandchild ) {
													$grandchildName     = $grandchild['name'];
													$grandchildUrl      = $grandchild['url'];
													$greatgrandchildren = $grandchild['children'];
													?>
                                                    <li class="OffcanvasMenu-grandchild">
                                                        <a href="<?= $grandchildUrl ?>"><?= $grandchildName ?></a>
														<?php
														if ( $greatgrandchildren ) {
															echo "<ul class='OffcanvasMenu-greatgrandchildren menu vertical nested'>";
															foreach ( $greatgrandchildren as $greatgrandchild ) {
																$greatgrandchildName = $greatgrandchild['name'];
																$greatgrandchildUrl  = $greatgrandchild['url'];
																echo "<li class='OffcanvasMenu-greatgrandchild'><a href='$greatgrandchildUrl'>$greatgrandchildName</a>";
															}
															echo "</ul>";
														}
														?>
                                                    </li>
												<?php } ?>
                                            </ul>
											<?php
										} else {
											?>
                                            <div class="OffcanvasMenu-grandchildren OffcanvasMenu-grandchildren--noMenu">
												<?php
												foreach ( $grandchildren as $grandchild ) {
													$grandchildName = $grandchild['name'];
													$grandchildUrl  = $grandchild['url'];
													?>
                                                    <div class="OffcanvasMenu-grandchild"><a
                                                                href="<?= $grandchildUrl ?>"><?= $grandchildName ?></a>
                                                    </div>
												<?php } ?>
                                            </div>
											<?php

										}
									}
									?>

                                </li>
								<?php
							} ?>
                        </ul>
						<?php
					} ?>

                </li>
				<?php
			}
			?>
			<?php
			/**
			 * Utility Menu
			 * @todo when merging with drupal, can you add classes through the CMS for hiding this on tablet up?
			 */

			$utility_menu = [
				[
					'name'     => 'News',
					'url'      => '#',
					'children' => '',
				],
				[
					'name'     => 'Careers',
					'url'      => '#',
					'children' => '',

				],
				[
					'name'     => 'About Us',
					'url'      => '#',
					'children' => [
						[
							'name' => 'Quality & Certifications',
							'url'  => '#',
						],
					],


				],
				[
					'name'     => 'Rep Locator',
					'url'      => '#',
					'children' => '',

				],
			];
			if ( $utility_menu ) {
				foreach ( $utility_menu as $menu_item ) {
					$url      = $menu_item['url'];
					$name     = $menu_item['name'];
					$children = $menu_item['children'];
					$classes  = '';
					if ( $children ) {
						$classes = 'has-children';
					}
					echo "<li class='hide-for-medium OffcanvasMenu-menuParent $classes'><a href='$url'>$name</a>";

					if ( $children ) { ?>
                        <ul class="OffcanvasMenu-menuChildren vertical menu nested accordion-menu OffcanvasMenu--utility"
                            data-accordion-menu
                            data-submenu-toggle="true">
							<?php foreach ( $children

							as $child ) {
							$childUrl  = $child['url'];
							$childName = $child['name'];
							?>
                            <li class="OffcanvasMenu-menuChild OffcanvasMenu--utilityChild"><a
                                        href="<?= $childUrl ?>"><?= $childName ?></a>
								<?php
								} ?>
                        </ul>
						<?php
					}
					echo "</li>";
				}
			}

			?>
            <li class="OffcanvasMain-buttons">
                <a href="#" class="button OffcanvasMain-button"><span class="fas fa-envelope"></span> CONTACT SUPPORT
                    <span
                            class="fas fa-caret-right"></span></a>
            </li>
        </ul>
		<?php
	}
	?>
</div>

